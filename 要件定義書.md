# **AnchorMind 要件定義書**

## **1\. システム概要**

### **背景（開発に至った経緯） \[Why\]**

研究活動や技術調査において、PDF論文を読みながら外部のメモアプリ（Notion等）に記録を残す際、「メモの内容がPDFのどの部分に対応しているか」というコンテキストが失われやすい。後で見返した際に、参照箇所を特定するためにPDFを再検索する手間が発生しており、思考の連続性が断たれる課題があった。

### **目的（解決したい課題、期待する効果） \[What\]**

* **課題**: PDFとメモの分断による情報検索コストの増大。  
* **効果**:  
  * メモからPDFの該当箇所へ即座にジャンプ可能にすることで、振り返り時間を短縮。  
  * ヒートマップにより、自身の関心がどこに集中しているかを視覚的に把握。  
  * 断片的なメモを構造化し、知識の定着を促進。

### **スコア（開発の境界線） \[Where\]**

* **やること（In-Scope）**:  
  * WebブラウザでのPDF表示とクリック座標の取得。  
  * 座標に紐付いたMarkdown形式のメモ作成・保存。  
  * ページサムネイル上でのヒートマップ表示。  
  * メモクリックによるPDFの該当箇所へのスクロール。  
* **やらないこと（Out-of-Scope）**:  
  * PDFファイル自体の直接編集（文字の書き換えや描画）。  
  * 複数人でのリアルタイム同時編集機能。  
  * 高度なOCR（画像化されたPDFからの文字抽出） ※将来検討。

## **2\. 業務要件**

### **ターゲット \[Who\]**

* **ペルソナ**: 論文を日常的に読む大学院生、技術ドキュメントを整理するエンジニア。  
* **ITリテラシー**: 中〜高（Markdownや基本的なWeb操作に慣れている）。

### **業務フロー（導入前後）**

#### **【導入前（現状）】**

1. PDFビューアでファイルを開く。  
2. 別ウィンドウでメモアプリ（Notion等）を開く。  
3. 重要な箇所を見つけたら、メモアプリに「p.5 手法の章」のように場所をメモし、内容を書く。  
4. 後日、メモを見てPDFの該当箇所を探すが、具体的な位置を特定するのに時間がかかる。

#### **【導入後】**

1. AnchorMindでPDFを開く。  
2. 重要な箇所をクリック。  
3. その場でメモを記述（座標は自動保存）。  
4. 後日、メモの一覧から項目をクリックするだけで、PDFがその場所まで自動でスクロールする。

### **ステークホルダー**

* **開発責任者（意思決定者）**: 本人（ユーザー自身）。  
* **エンドユーザー**: 本人、および将来的な公開後の一般ユーザー（学生、研究者）。

### **規模**

* **同時ログインユーザー数**: 1名（個人利用想定）。  
* **月間処理件数**: PDF登録 10〜30件程度 / メモ作成 100〜500件程度。

## **3\. 機能要件**

### **機能一覧**

| ID | 機能名 | 内容 |
| :---- | :---- | :---- |
| F-01 | PDFアップロード | ローカルのPDFを選択し、アプリ内に読み込む機能。 |
| F-02 | PDFビューア | PDFの表示、拡大縮小、スクロール機能。 |
| F-03 | アンカー生成 | PDF上のクリック位置からページ番号と座標（x, y）を抽出。 |
| F-04 | メモエディタ | Markdown形式でのテキスト入力、プレビュー表示。 |
| F-05 | ジャンプ機能 | メモ一覧から特定のメモを選択し、PDFの該当位置へ移動。 |
| F-06 | ヒートマップ | ページごとのメモ密度をサムネイル上にオーバーレイ表示。 |
| F-07 | 全文検索 | メモ本文を対象とした検索機能。 |

### **画面仕様**

#### **画面一覧**

1. **ダッシュボード（ファイル選択）画面**: 登録済みPDFの一覧表示と新規登録。  
2. **メインエディタ画面**: 左側にPDFビューア、右側にメモ一覧とエディタを表示。  
3. **設定画面**: APIキーの設定や表示テーマの変更。

#### **画面遷移図**

\[ダッシュボード\] \<---\> \[メインエディタ\]  
      |  
      \+--------------\> \[設定画面\]

### **データ定義**

* **Document**: PDFファイル名、ハッシュ値、登録日時。  
* **Note**: メモ本文、カテゴリ、ページ番号、X座標、Y座標、作成/更新日時。

### **外部インターフェース**

* なし

## **4\. 非機能要件**

### **性能・拡張性**

* **応答時間**: メモ保存およびPDFジャンプの処理時間は1秒以内。  
* **拡張性**: 将来的にローカルLLM（Ollama等）への差し替えが可能な設計とする。

## **5\. 技術・インフラ・セキュリティ要件**

### **システム構成**

### **技術スタック**

* **フロントエンド**: React (Vite), Tailwind CSS, pdf.js  
* **バックエンド**: FastAPI (Python)  
* **データベース**: SQLite  
* **インフラ**: ローカル実行、または無料枠（Vercel / Render.com）

## **6\. プロジェクト管理**

### **スケジュール**

* **1週目**: プロトタイプ開発（PDF表示、座標取得、SQLite保存）。  
* **2週目**: UIブラッシュアップ（ヒートマップ、サイドバーナビゲーション）。  
* **3週目**: 検証・微調整（フェーズ3に向けたAI連携の準備）。

### **体制図**

* **開発・デザイン・QA**: 本人

### **予算**

* **開発費用**: 0円（OSSおよび無料枠のクラウドサービスを利用）。  
* **運用費用**: 0円（Gemini API無料枠の範囲内で利用）。

## **7\. リリース・検証要件**

### **公開手順**

1. GitHubリポジトリの作成。  
2. Vercel（フロント）https://www.google.com/search?q=%E3%81%A8Render.com（バック）の自動デプロイ設定。  
3. 環境変数（APIキー等）の設定。

### **動作確認チェックリスト**

* \[ \] PDFが正常に表示されるか。  
* \[ \] クリックした位置とメモが正しく紐付いているか。  
* \[ \] メモをクリックしてPDFが該当位置にスクロールするか。  
* \[ \] サムネイルにヒートマップが反映されているか。

### **不具合時のロールバック計画**

* GitHubのコミット履歴による以前の安定バージョンへの差し戻し。  
* SQLiteファイルの世代管理（バックアップ）からの復旧。